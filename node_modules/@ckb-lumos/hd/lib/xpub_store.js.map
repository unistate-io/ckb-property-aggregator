{"version":3,"file":"xpub_store.js","names":["_extended_key","require","_fs","_interopRequireDefault","obj","__esModule","default","XPubStore","constructor","accountExtendedPublicKey","toAccountExtendedPublicKey","save","path","overwrite","fs","existsSync","Error","writeFileSync","toJson","JSON","stringify","xpubkey","serialize","slice","load","json","readFileSync","xpub","parse","AccountExtendedPublicKey","exports"],"sources":["../src/xpub_store.ts"],"sourcesContent":["import { AccountExtendedPublicKey } from \"./extended_key\";\nimport fs from \"fs\";\n\nexport class XPubStore {\n  private accountExtendedPublicKey: AccountExtendedPublicKey;\n\n  constructor(accountExtendedPublicKey: AccountExtendedPublicKey) {\n    this.accountExtendedPublicKey = accountExtendedPublicKey;\n  }\n\n  toAccountExtendedPublicKey(): AccountExtendedPublicKey {\n    return this.accountExtendedPublicKey;\n  }\n\n  save(\n    path: string,\n    {\n      overwrite = false,\n    }: {\n      overwrite?: boolean;\n    } = {}\n  ) {\n    if (!overwrite && fs.existsSync(path)) {\n      throw new Error(\"XPub file already exists!\");\n    }\n    fs.writeFileSync(path, this.toJson());\n  }\n\n  toJson(): string {\n    return JSON.stringify({\n      xpubkey: this.accountExtendedPublicKey.serialize().slice(2),\n    });\n  }\n\n  static load(path: string): XPubStore {\n    const json = fs.readFileSync(path, \"utf-8\");\n    const xpub = JSON.parse(json).xpubkey;\n    const accountExtendedPublicKey = AccountExtendedPublicKey.parse(\n      \"0x\" + xpub\n    );\n    return new XPubStore(accountExtendedPublicKey);\n  }\n}\n"],"mappings":";;;;;;AAAA,IAAAA,aAAA,GAAAC,OAAA;AACA,IAAAC,GAAA,GAAAC,sBAAA,CAAAF,OAAA;AAAoB,SAAAE,uBAAAC,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,KAAAE,OAAA,EAAAF,GAAA;AAEb,MAAMG,SAAS,CAAC;EAGrBC,WAAWA,CAACC,wBAAkD,EAAE;IAC9D,IAAI,CAACA,wBAAwB,GAAGA,wBAAwB;EAC1D;EAEAC,0BAA0BA,CAAA,EAA6B;IACrD,OAAO,IAAI,CAACD,wBAAwB;EACtC;EAEAE,IAAIA,CACFC,IAAY,EACZ;IACEC,SAAS,GAAG;EAGd,CAAC,GAAG,CAAC,CAAC,EACN;IACA,IAAI,CAACA,SAAS,IAAIC,WAAE,CAACC,UAAU,CAACH,IAAI,CAAC,EAAE;MACrC,MAAM,IAAII,KAAK,CAAC,2BAA2B,CAAC;IAC9C;IACAF,WAAE,CAACG,aAAa,CAACL,IAAI,EAAE,IAAI,CAACM,MAAM,CAAC,CAAC,CAAC;EACvC;EAEAA,MAAMA,CAAA,EAAW;IACf,OAAOC,IAAI,CAACC,SAAS,CAAC;MACpBC,OAAO,EAAE,IAAI,CAACZ,wBAAwB,CAACa,SAAS,CAAC,CAAC,CAACC,KAAK,CAAC,CAAC;IAC5D,CAAC,CAAC;EACJ;EAEA,OAAOC,IAAIA,CAACZ,IAAY,EAAa;IACnC,MAAMa,IAAI,GAAGX,WAAE,CAACY,YAAY,CAACd,IAAI,EAAE,OAAO,CAAC;IAC3C,MAAMe,IAAI,GAAGR,IAAI,CAACS,KAAK,CAACH,IAAI,CAAC,CAACJ,OAAO;IACrC,MAAMZ,wBAAwB,GAAGoB,sCAAwB,CAACD,KAAK,CAC7D,IAAI,GAAGD,IACT,CAAC;IACD,OAAO,IAAIpB,SAAS,CAACE,wBAAwB,CAAC;EAChD;AACF;AAACqB,OAAA,CAAAvB,SAAA,GAAAA,SAAA"}