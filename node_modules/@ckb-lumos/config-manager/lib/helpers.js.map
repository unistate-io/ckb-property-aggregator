{"version":3,"file":"helpers.js","names":["_manager","require","findConfigByScript","scriptTemplate","SCRIPTS","scripts","getConfig","Object","values","find","item","CODE_HASH","codeHash","HASH_TYPE","hashType","nameOfScript","foundEntry","entries","config","undefined"],"sources":["../src/helpers.ts"],"sourcesContent":["import { Script } from \"@ckb-lumos/base\";\nimport { ScriptConfig, ScriptConfigs } from \"./types\";\nimport { getConfig } from \"./manager\";\n\ntype ScriptTemplate = Omit<Script, \"args\">;\n\nexport function findConfigByScript(\n  scriptTemplate: ScriptTemplate,\n  SCRIPTS?: ScriptConfigs\n): ScriptConfig | undefined {\n  const scripts = SCRIPTS || getConfig().SCRIPTS;\n\n  return Object.values(scripts).find(\n    (item) =>\n      item?.CODE_HASH === scriptTemplate.codeHash &&\n      item?.HASH_TYPE === scriptTemplate.hashType\n  );\n}\n\n/**\n *\n * We may need to determine if a `scriptTemplate` is a kind of ScriptConfig\n *\n * ```typescript\n * if (keyOfScript({ codeHash... })  === 'SECP256K1')  {\n *   // ...\n * }\n * ```\n * @param scriptTemplate\n * @param SCRIPTS\n */\nexport function nameOfScript<S extends ScriptConfigs>(\n  scriptTemplate: ScriptTemplate,\n  SCRIPTS?: ScriptConfigs\n): keyof S | undefined {\n  const scripts = SCRIPTS || getConfig().SCRIPTS;\n\n  const foundEntry = Object.entries(scripts).find(\n    ([, config]) =>\n      config?.CODE_HASH === scriptTemplate.codeHash &&\n      config?.HASH_TYPE === scriptTemplate.hashType\n  );\n\n  if (!foundEntry) return undefined;\n  return foundEntry[0];\n}\n"],"mappings":";;;;;;;AAEA,IAAAA,QAAA,GAAAC,OAAA;AAIO,SAASC,kBAAkBA,CAChCC,cAA8B,EAC9BC,OAAuB,EACG;EAC1B,MAAMC,OAAO,GAAGD,OAAO,IAAI,IAAAE,kBAAS,EAAC,CAAC,CAACF,OAAO;EAE9C,OAAOG,MAAM,CAACC,MAAM,CAACH,OAAO,CAAC,CAACI,IAAI,CAC/BC,IAAI,IACH,CAAAA,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEC,SAAS,MAAKR,cAAc,CAACS,QAAQ,IAC3C,CAAAF,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEG,SAAS,MAAKV,cAAc,CAACW,QACvC,CAAC;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,SAASC,YAAYA,CAC1BZ,cAA8B,EAC9BC,OAAuB,EACF;EACrB,MAAMC,OAAO,GAAGD,OAAO,IAAI,IAAAE,kBAAS,EAAC,CAAC,CAACF,OAAO;EAE9C,MAAMY,UAAU,GAAGT,MAAM,CAACU,OAAO,CAACZ,OAAO,CAAC,CAACI,IAAI,CAC7C,CAAC,GAAGS,MAAM,CAAC,KACT,CAAAA,MAAM,aAANA,MAAM,uBAANA,MAAM,CAAEP,SAAS,MAAKR,cAAc,CAACS,QAAQ,IAC7C,CAAAM,MAAM,aAANA,MAAM,uBAANA,MAAM,CAAEL,SAAS,MAAKV,cAAc,CAACW,QACzC,CAAC;EAED,IAAI,CAACE,UAAU,EAAE,OAAOG,SAAS;EACjC,OAAOH,UAAU,CAAC,CAAC,CAAC;AACtB"}